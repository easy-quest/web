# Linux Terminal ч.2 | Файлы, папки, root-права

25 мая

4,5 мин.

Продолжаем дополнять теорию практикой. Первая, но не менее интересная часть находится [здесь](https://zen.me/1gzRs6x1).

### Создание папок в терминале Linux

Пришла пора погрузиться в работу с файлами и папками, но для начала немного  обезопасим себя и создадим для экспериментов новый каталог. Чтобы  случайно не повредить уже имеющиеся файлы и папки, сделаем это в  каталоге для хранения временных данных:

Создаём в каталоге tmp папку tutorial

> mkdir - сокращение от ‘make directory’ (создать каталог).

Создадим три подкаталога: *dir1, dir2, dir3*

Создание нескольких подкаталогов одной командой

> dir1, dir2, dir3 являются аргументами для команды mkdir. Каждая команда может принять определённое количество аргументов: 
> cd — 0-1, mkdir ⩾ 1 и так далее.

Убедимся в том, что подкаталоги созданы с помощью команды *'ls':*

В Ubuntu 20.04 по умолчанию имена каталогов обозначены синим цветом 

> ls - сокращение от list (список)

Обратите внимание, что программа создала все три каталога в одной папке, а не  dir2 в dir1 и dir3 в dir2 (или как-нибудь иначе). Но что если нам  потребуется создать несколько вложенных каталогов (в одном создать  другой, в другом третий и так далее)?

Здесь на помощь приходит краткий параметр *'-p' (parents - родители):*

> *К*ак правило, параметры вводятся сразу после имени команды и позволяют более эффективно ею пользоваться. Некоторые параметры имеют краткую форму  написания (дефис и буква, как в данном случае), другие вводятся при  помощи следующих друг за другом двух дефисов и более длинного слова.  Иногда один и тот же параметр может иметь краткую и длинную формы  (например, вместо '-p' можно использовать '--parents')

При использовании данного параметра программа также проверяет, присутствует ли подкаталог *dir4* в текущей директории, но в случае отсутствия не выводит ошибку, а создаёт его, затем в нём создаёт *dir5,* в котором после создаёт *dir6.* 

> Чтобы наглядно увидеть всю иерархию каталогов, начиная  с текущего,  воспользуйтесь командой 'tree'. По умолчанию она отсутствует в системе,  для установки воспользуйтесь 'sudo apt install tree'. Более подробно о  sudo написано в последнем разделе данной статьи

Логично предположить, что при попытке создания каталога с пробелом в его  названии будет создано два отдельных каталога. Чтобы создать такой  каталог, необходимо прибегнуть к способу с использованием кавычек,  описанному [в предыдущей статье](https://zen.me/1gzRs6x2) или воспользоваться *экранированием* символов. 

> В данном случае под экранированием подразумевается способ указать  компьютеру, что в данном случае он должен воспринимать пробел не как  разделитель аргументов, а всего лишь как символ в наименовании каталога. Указателем экранирования в терминале является обратная косая черта,  которая должна находиться перед символом, который нужно экранировать:

### **Создание файлов в терминале Linux**

Теперь, когда у нас достаточно каталогов, пора приступить к созданию файлов.  Ранее я говорил, что оболочка позволяет перенаправлять вывод из одной  программы в другую, а что нам мешает перенаправить результат выполнения  команды в текстовый файл?

Попробуем перенаправить вывод команды *tree* в текстовый файл *output.txt*

> Для перенаправления вывода в данном случае используется символ '>':

Обратите внимание, что при отсутствии файла с указанным именем он создаётся  автоматически. Вывести содержимое получившегося файла можно при помощи  команды *'cat'* (con**cat**enate - соединять)*.* При попытке снова вывести в файл результат работы программы перезапишет содержащиеся в нём данные. Если Вы хотите "дописать" данные в файл,  воспользуйтесь *'>>'*:

> Если очень хочется посмотреть на содержимое файла с помощью привычного  текстового редактора, можно воспользоваться командой 'gedit output.txt':

Просмотр текстового файла в gedit

Ещё одной популярной командой для вывода является *'echo':*

> Команда 'echo' выводит всё, что следует за ней, но с некоторыми ограничениями.  Например, можно печатать несколько слов без экранирования пробелов, но,  например, скобки могут вызвать ошибку, а одинаковые кавычки будут  игнорироваться. Чтобы этого избежать, используйте экранирование символов и разные кавычки:

Примеры некоторых проблем при выводе и возможные решения

> Чтобы не набирать каждый раз заново, пользуйтесь стрелками вверх и вниз, чтобы перемещаться по истории команд

Казалось бы, зачем нужна команда, выводящая то, что ей передали в качестве  аргумента? В основном она полезна при написании скриптов, например,  чтобы показать пользователю, что скрипт работает, а не завис или ждёт  ввода данных. Нам же эта команда поможет создать простые текстовые файлы прямо из терминала: 

Создание простых текстовых файлов с помощью команды 'echo'

Теперь выведем содержимое этих трёх файлов при помощи *'cat'*:

> cat своим названием намекает на то, что если передать ей в качестве  аргументов несколько файлов, то их содержимое будет объединено в один  вывод

Если несколько файлов имеют однотипные имена, можно сэкономить время, используя подстановочные символы: 

- \* - подразумевает что на её месте может находиться ноль или более символов:

- ? - подразумевает, что на его месте может находиться один какой-то символ:

> Теперь Вам должно быть понятно, что в именах файлов и папок лучше не допускать использование каких-либо символов и пробелов (вместо последних  рекомендуется использование символа подчёркивания), а если вдруг такие  файлы всё-таки попадутся, то обязательно экранируйте их

Возможно, Вы уже догадались, что с помощью *'cat'* можно легко скопировать содержимое нескольких текстовых файлов в один:

Перенаправляем вывод 'cat' в текстовый файл

Увеличим количество строк в *'combined.txt'* до такой степени, чтобы содержимое файла не могло полностью поместиться в окне терминала. 

> Можно использовать несколько раз следующие команды:

> ls >> combined.txt

> tree >> combined.txt

> cat t*.txt >> combined.txt

Теперь воспользуемся программой, именуемой пейджером (pager; page - страница). 

> Стандартный пейджер прежних времен назывался “more” (больше), потому что в нижней  части каждой страницы он помещал строку текста с надписью "–More–",  указывая на то, что ещё есть непрочитанное содержимое. Сейчас есть более лучший пейджер - less (меньше). Программисты дали ему такое название,  поскольку он создавался на замену "more"

less выводит содержимое файла постранично, что делает процесс чтения более удобным:

Команда: less combined.txt. 

Для перемещения по содержимому используйте следующие клавиши:

- "Стрелка вверх", "Стрелка вниз" - для построчного перемещения;
- "Page Up", "Page Down" - для постраничного перемещения;
- "Home", "End" - для мгновенного перемещения в начало или конец файла соответственно;
- "q", "Ctrl+Z" - выход.

> Снова напомню о том, что unix-подобные ОС чувствительны к регистру, поэтому  "a.txt", "a.TXT", "A.txt", "A.TXT" будут рассматриваться системой как  ЧЕТЫРЕ разных файла:

> Избегайте использование одинаковых имён файлов в разных регистрах. Это не только  поможет избежать путаницы, но и предотвратит проблемы при переходе,  например, от Linux к Windows (последняя не чувствительна к регистру).

> Как правило, в именах файлов принято использовать буквы нижнего регистра,  дефис, подчёркивание и точку, отделяющую имя файла от его расширения. 



### Привилегии суперпользователя

Одна из веских причин для изучения некоторых основ работы с терминалом  заключается в том, что большинство инструкций, доступных в Интернете  часто отдают предпочтение использованию команд оболочки, а не  графическому интерфейсу. Если эти инструкции требуют изменение файлов,  находящихся в системных каталогах или каталогах других пользователей, то сделать это можно только обладая полномочиями администратора  (суперпользователя или root).  Прежде чем запускать любую команду,  требующую таких полномочий, необходимо узнать о последствиях её работы  для системы.

Суперпользователь, как следует из названия, наделён возможностями, не доступными обычным  пользователям компьютера. В старых системах это был реальный  пользователь с соответствующей учётной записью, под которой можно было  войти в систему. Что касается возможностей суперпользователя, ему  доступно: 

- изменение или удаление любых файлов в любом каталоге системы, независимо от того, кому они принадлежат; 
- изменение правил брандмауэра или запуск сетевых служб, которые потенциально могут открыть машину для атаки; 
- выключение компьютера, даже если другие люди все еще используют его и т.д. 

В общем, root может делать практически все, что угодно, легко обходя меры предосторожности, которые обычно применяются для того, чтобы  пользователи не могли нанести вред другим пользователям или системе.

Пользователь, входящий в систему как root, способен совершать ошибки, как и любой  другой человек. Интернет полон историй о том, как неправильно набранная  команда удаляла всю файловую систему или "роняла" сервер. Также, если  пользователь вошел в систему как root и покинул своё рабочее место, то  для недовольного коллеги не слишком сложно занять его, чтобы нанести  ущерб. Несмотря на всё это, администраторы на протяжении многих лет  использовали root в качестве своей основной или единственной учетной  записи.

> Ещё раз: если кто-то или что-то требует прав суперпользователя — отнеситесь к этому с подозрением

В попытке избежать использование учётной записи суперпользователя в  качестве основной, многие дистрибутивы Linux добавили возможность  однократного выполнения команды от имени суперпользователя (в Ubuntu —  sudo). 

> sudo - сокращение от  switch user and do (переключи пользователя и выполни)

К sudo нужно обращаться для выполнения только тех команд, которые требуют повышенных привилегий, проводя основное время в учётной записи рядового пользователя. 

> В Ubuntu первый пользователь, созданный при установке системы, считается  суперпользователем (т.е. у него есть возможность использовать команду  sudo)

Для примера попробуем проверить обновления для установленных в системе пакетов сначала от имени обычного пользователя:

А теперь, если ваша учётная запись имеет привилегии на выполнение команд  от имени суперпользователя, выполните то же самое с префиксом sudo:

> Для обновления воспользуйтесь командой 'sudo apt upgrade'



К моему большому сожалению, во вторую часть не удалось поместить весь  оставшийся материал, поэтому третьей статье, посвящённой linux-терминалу — быть!

> Если статья была полезной - ставьте лайк и подписывайтесь на канал, чтобы не пропустить продожение. Если что-то непонятно или хотелось бы дополнить - оставляйте комментарии, я с удовольствием на них отвечу :)



**UPD:** Часть 3: https://zen.me/1LzJbh